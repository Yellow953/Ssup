<%= render "layouts/header" %>

<div class="w-full h-screen flex">
    <div class="bg-gray-500 w-1/4 p-5 h-screen">
        <h1 class="text-green-500">Welcome <%= current_user.email %></h1>
        <br><br>
        
        <h2>Users:</h2>
        <% if @users.any? %>
            <%= turbo_stream_from "users" %>
            <div id="users">
                <% @users.each do |user| %>
                    <%= render user %>
                <% end %>
            </div>
        <% else %>
            <small>No Rooms Yet</small>
        <% end %>
        <br><br>

        <h2>Rooms:</h2>
        <% if @rooms.any? %>
            <%= turbo_stream_from "rooms" %>
            <%= render "rooms/form" %>
            <div id="rooms">
                <% @rooms.each do |room| %>
                    <%= render room %>
                <% end %>
            </div>
        <% else %>
            <small>No Rooms Yet</small>
        <% end %>
    </div>
    <div class="bg-gray-200 w-3/4 p-5 h-screen">
        <% if @selected_room %>
            <div class="w-full bg-gray-500">
                <h1><%= @selected_room.name %></h1>
            </div>
        <% else %>
            <div class="flex h-screen justify-center items-center">
                <h1 class="text-center">Select a user or a chat room to start sending messages</h1>
            </div>
        <% end %>
    </div>
</div>